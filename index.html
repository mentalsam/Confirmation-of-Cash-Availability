<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>現金有り高の確認</title>
  <style>
    body {
      font-family: 'Arial', 'Hiragino Sans', 'Meiryo', sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 1rem;
      color: #333;
    }
    h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      border-radius: 16px;
      padding: 1.25rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .tabs {
      display: flex;
      margin-bottom: 1rem;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid #e1e1e1;
    }
    .tab {
      flex: 1;
      text-align: center;
      padding: 0.75rem 0;
      background: #f5f5f5;
      cursor: pointer;
      transition: all 0.3s;
    }
    .tab.active {
      background: #4a6fa5;
      color: white;
      font-weight: bold;
    }
    .safe {
      background: #f8f9fc;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 1.5rem;
    }
    .safe-title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 1rem;
      font-size: 1.2rem;
      color: #4a6fa5;
    }
    .money-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .money-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: white;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    .money-row.active {
      border-color: #4a6fa5;
      background: #edf2fa;
      box-shadow: 0 2px 8px rgba(74, 111, 165, 0.2);
    }
    .money-label {
      font-size: 1rem;
      font-weight: 500;
      pointer-events: none; /* 金額部分のクリックを無効化 */
    }
    .money-row .input-group {
      display: flex;
      align-items: center;
      background: #f5f7fa;
      border-radius: 6px;
      overflow: hidden;
      border: 1px solid #ddd;
    }
    .money-row .input-group.focus {
      border-color: #4a6fa5;
      box-shadow: 0 0 0 2px rgba(74, 111, 165, 0.2);
    }
    .money-row input {
      width: 60px;
      text-align: right;
      font-size: 1rem;
      padding: 0.5rem;
      border: none;
      background: transparent;
      -moz-appearance: textfield; /* Firefox */
    }
    .money-row input::-webkit-outer-spin-button,
    .money-row input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .money-row input:focus {
      outline: none;
    }
    .money-row span {
      margin-left: 4px;
      font-size: 0.9rem;
      padding-right: 8px;
    }
    /* 新しく追加: +-ボタンのスタイル */
    .btn-count {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #e8e8e8;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      font-weight: bold;
      color: #555;
      transition: all 0.2s;
      user-select: none;
      border-radius: 4px;
      margin: 0 2px;
    }
    .btn-count:hover {
      background: #d8d8d8;
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .btn-count:active {
      background: #c8c8c8;
      transform: translateY(1px);
      box-shadow: none;
    }
    .btn-minus {
      background: #ffebee;
      color: #e53935;
    }
    .btn-minus:hover {
      background: #ffcdd2;
    }
    .btn-minus:active {
      background: #ef9a9a;
    }
    .btn-plus {
      background: #e8f5e9;
      color: #43a047;
    }
    .btn-plus:hover {
      background: #c8e6c9;
    }
    .btn-plus:active {
      background: #a5d6a7;
    }
    .result {
      margin-top: 1.5rem;
      font-size: 1.2rem;
      font-weight: bold;
      text-align: center;
      padding: 1rem;
      background: #e8f4ff;
      border-radius: 10px;
      border-left: 4px solid #4a6fa5;
    }
    .total-count {
      margin-top: 1.5rem;
      background: #f9fcf6;
      border-radius: 10px;
      padding: 1rem;
      font-size: 1rem;
      border: 1px solid #e0e9d9;
    }
    .total-count-title {
      font-weight: bold;
      margin-bottom: 0.75rem;
      text-align: center;
      color: #447722;
    }
    .total-count-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .total-count-row {
      display: grid;
      grid-template-columns: 1fr auto auto;
      gap: 1rem;
      padding: 0.4rem 0;
      border-bottom: 1px dashed #ddd;
    }
    .total-count-row span:nth-child(2),
    .total-count-row span:nth-child(3) {
      text-align: right;
    }
    .total-count-row span:nth-child(3) {
      color: #2c7a00;
      font-weight: bold;
    }
    .zero-count {
      color: #aaa;
    }
    .count-header {
      display: grid;
      grid-template-columns: 1fr auto auto;
      gap: 1rem;
      padding: 0.25rem 0;
      margin-bottom: 0.5rem;
      border-bottom: 2px solid #ddd;
      font-weight: bold;
      color: #555;
    }
    .count-header span:nth-child(2),
    .count-header span:nth-child(3) {
      text-align: right;
    }
    .safe-section {
      display: none;
    }
    .safe-section.active {
      display: block;
      animation: fadeIn 0.3s;
    }
    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }
    button {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 6px;
      background: #4a6fa5;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover {
      background: #3a5a8c;
    }
    button.clear-all {
      background: #d9534f;
      margin-top: 1rem;
      width: 100%;
    }
    button.clear-all:hover {
      background: #c9302c;
    }
    .footer {
      text-align: center;
      margin-top: 2rem;
      padding: 1rem 0;
      font-size: 0.8rem;
      color: #777;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @media (max-width: 480px) {
      .container {
        padding: 1rem;
        border-radius: 12px;
      }
      h2 {
        font-size: 1.3rem;
        margin-bottom: 1rem;
      }
      .money-row {
        padding: 0.6rem 0.75rem;
      }
      .money-label {
        font-size: 0.95rem;
      }
      /* スマホでのタップしやすさ改善 */
      .btn-count {
        width: 40px;
        height: 40px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>現金有り高の確認</h2>
    
    <div class="tabs">
      <div class="tab active" id="tab-smallsafe">小口</div>
      <div class="tab" id="tab-counter">カウンター金庫</div>
    </div>
    
    <div class="safe-section active" id="smallsafe-section">
      <div class="safe">
        <div class="safe-title">小口金庫</div>
        <div class="money-list">
          <div class="money-row">
            <div class="money-label">10000円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen10000-a">－</div>
              <input type="number" id="yen10000-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen10000-a">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">5000円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen5000-a">－</div>
              <input type="number" id="yen5000-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen5000-a">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">1000円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen1000-a">－</div>
              <input type="number" id="yen1000-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen1000-a">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">500円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen500-a">－</div>
              <input type="number" id="yen500-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen500-a">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">100円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen100-a">－</div>
              <input type="number" id="yen100-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen100-a">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">50円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen50-a">－</div>
              <input type="number" id="yen50-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen50-a">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">10円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen10-a">－</div>
              <input type="number" id="yen10-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen10-a">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">5円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen5-a">－</div>
              <input type="number" id="yen5-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen5-a">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">1円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen1-a">－</div>
              <input type="number" id="yen1-a" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen1-a">＋</div>
            </div>
          </div>
        </div>
        <div class="button-group">
          <button id="clear-smallsafe">小口をクリア</button>
        </div>
      </div>
    </div>
    
    <div class="safe-section" id="counter-section">
      <div class="safe">
        <div class="safe-title">カウンター金庫</div>
        <div class="money-list">
          <div class="money-row">
            <div class="money-label">10000円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen10000-b">－</div>
              <input type="number" id="yen10000-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen10000-b">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">5000円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen5000-b">－</div>
              <input type="number" id="yen5000-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen5000-b">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">1000円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen1000-b">－</div>
              <input type="number" id="yen1000-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen1000-b">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">500円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen500-b">－</div>
              <input type="number" id="yen500-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen500-b">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">100円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen100-b">－</div>
              <input type="number" id="yen100-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen100-b">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">50円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen50-b">－</div>
              <input type="number" id="yen50-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen50-b">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">10円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen10-b">－</div>
              <input type="number" id="yen10-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen10-b">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">5円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen5-b">－</div>
              <input type="number" id="yen5-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen5-b">＋</div>
            </div>
          </div>
          <div class="money-row">
            <div class="money-label">1円</div>
            <div class="input-group">
              <div class="btn-count btn-minus" data-input="yen1-b">－</div>
              <input type="number" id="yen1-b" min="0" value="0">
              <span>枚</span>
              <div class="btn-count btn-plus" data-input="yen1-b">＋</div>
            </div>
          </div>
        </div>
        <div class="button-group">
          <button id="clear-counter">カウンターをクリア</button>
        </div>
      </div>
    </div>

    <!-- 合計枚数表示セクション -->
    <div class="total-count" id="totalCountDisplay">
      <div class="total-count-title">合計枚数と金額</div>
      <div class="count-header">
        <span>金種</span>
        <span>枚数</span>
        <span>金額</span>
      </div>
      <div class="total-count-list" id="totalCountList">
        <!-- スクリプトで動的に追加 -->
      </div>
    </div>
    
    <!-- 全クリアボタン -->
    <button class="clear-all" id="clear-all">すべてクリア</button>
    
    <!-- 本日現金残高を一番下に移動 -->
    <div class="result" id="totalDisplay">合計: ¥0</div>
    
    <!-- フッター -->
    <div class="footer">
      © 2025 Matsuda rights reserved.
    </div>
  </div>

  <script>
    const values = {
      yen10000: 10000,
      yen5000: 5000,
      yen1000: 1000,
      yen500: 500,
      yen100: 100,
      yen50: 50,
      yen10: 10,
      yen5: 5,
      yen1: 1,
    };

    const names = {
      yen10000: "10000円",
      yen5000: "5000円",
      yen1000: "1000円",
      yen500: "500円",
      yen100: "100円",
      yen50: "50円",
      yen10: "10円",
      yen5: "5円",
      yen1: "1円",
    };

    // 金種のIDを金額の大きい順に並べる配列
    const sortedIds = [
      "yen10000", "yen5000", "yen1000", "yen500", 
      "yen100", "yen50", "yen10", "yen5", "yen1"
    ];

    // データを保存する関数
    function saveData() {
      const data = {};
      // 小口の値を保存
      for (const id in values) {
        data[`${id}-a`] = document.getElementById(`${id}-a`).value;
      }
      // カウンター金庫の値を保存
      for (const id in values) {
        data[`${id}-b`] = document.getElementById(`${id}-b`).value;
      }
      localStorage.setItem('moneyCalculatorData', JSON.stringify(data));
    }

    // データを読み込む関数
    function loadData() {
      const savedData = localStorage.getItem('moneyCalculatorData');
      if (savedData) {
        const data = JSON.parse(savedData);
        // 小口の値を読み込み
        for (const id in values) {
          const input = document.getElementById(`${id}-a`);
          if (input && data[`${id}-a`] !== undefined) {
            input.value = data[`${id}-a`];
          }
        }
        // カウンター金庫の値を読み込み
        for (const id in values) {
          const input = document.getElementById(`${id}-b`);
          if (input && data[`${id}-b`] !== undefined) {
            input.value = data[`${id}-b`];
          }
        }
      }
    }

    // クリア関数
    function clearInputs(prefix) {
      for (const id in values) {
        const input = document.getElementById(`${id}-${prefix}`);
        if (input) {
          input.value = 0;
        }
      }
      calculateTotal();
      saveData();
    }

    // 枚数を変更する関数（+/-ボタン用）
    function changeCount(inputId, amount) {
      const input = document.getElementById(inputId);
      let value = parseInt(input.value) || 0;
      value += amount;
      // 最小値は0に制限
      value = Math.max(0, value);
      input.value = value;
      calculateTotal();
    }

    function calculateTotal() {
      let total = 0;
      let totalCountHTML = "";
      
      // 各金種の合計枚数を保持するオブジェクト
      let totalCounts = {};
      
      // 初期化
      for (const id in values) {
        totalCounts[id] = 0;
      }

      // 小口の計算と枚数カウント
      for (const id in values) {
        const num = parseInt(document.getElementById(`${id}-a`).value) || 0;
        totalCounts[id] += num;
        total += num * values[id];
      }

      // カウンター金庫の計算と枚数カウント
      for (const id in values) {
        const num = parseInt(document.getElementById(`${id}-b`).value) || 0;
        totalCounts[id] += num;
        total += num * values[id];
      }

      // 合計枚数と金額のHTML作成（金額の大きい順に表示）
      for (const id of sortedIds) {
        const count = totalCounts[id];
        const subtotal = count * values[id];
        
        // 0枚の場合はクラスを追加して色を変える
        const zeroClass = count === 0 ? 'zero-count' : '';
        
        totalCountHTML += `
          <div class="total-count-row ${zeroClass}">
            <span>${names[id]}</span>
            <span>${count}枚</span>
            <span>¥${subtotal.toLocaleString()}</span>
          </div>
        `;
      }

      // HTMLに反映
      document.getElementById("totalDisplay").innerText = `本日現金残高: ¥${total.toLocaleString()}`;
      document.getElementById("totalCountList").innerHTML = totalCountHTML;
      
      // データを保存
      saveData();
    }

    window.onload = () => {
      // 保存されたデータを読み込む
      loadData();
      
      // タブ切り替え機能
      const tabSmallsafe = document.getElementById('tab-smallsafe');
      const tabCounter = document.getElementById('tab-counter');
      const smallsafeSection = document.getElementById('smallsafe-section');
      const counterSection = document.getElementById('counter-section');
      
      tabSmallsafe.addEventListener('click', () => {
        tabSmallsafe.classList.add('active');
        tabCounter.classList.remove('active');
        smallsafeSection.classList.add('active');
        counterSection.classList.remove('active');
      });
      
      tabCounter.addEventListener('click', () => {
        tabCounter.classList.add('active');
        tabSmallsafe.classList.remove('active');
        counterSection.classList.add('active');
        smallsafeSection.classList.remove('active');
      });
      
      // 入力フィールドにフォーカス/アクティブ効果を追加
      const allInputs = document.querySelectorAll('input[type="number"]');
      
      allInputs.forEach(input => {
        const row = input.closest('.money-row');
        const inputGroup = input.closest('.input-group');
        
        input.addEventListener('focus', () => {
          // 現在フォーカスされているフィールドをハイライト
          document.querySelectorAll('.money-row').forEach(r => r.classList.remove('active'));
          document.querySelectorAll('.input-group').forEach(g => g.classList.remove('focus'));
          
          row.classList.add('active');
          inputGroup.classList.add('focus');
          
          // モバイルでの表示を改善するため、フォーカス時に選択
          input.select();
        });
        
        // 入力時のイベント
        input.addEventListener("input", () => {
          calculateTotal();
        });
      });
      
      // +/- ボタンのイベント設定
      document.querySelectorAll('.btn-plus').forEach(btn => {
        btn.addEventListener('click', () => {
          const inputId = btn.getAttribute('data-input');
          changeCount(inputId, 1);
          // 対応する行とボタンをハイライト
          const row = btn.closest('.money-row');
          const inputGroup = btn.closest('.input-group');
          document.querySelectorAll('.money-row').forEach(r => r.classList.remove('active'));
          document.querySelectorAll('.input-group').forEach(g => g.classList.remove('focus'));
          row.classList.add('active');
          inputGroup.classList.add('focus');
        });
      });
      
      document.querySelectorAll('.btn-minus').forEach(btn => {
        btn.addEventListener('click', () => {
          const inputId = btn.getAttribute('data-input');
          changeCount(inputId, -1);
          // 対応する行とボタンをハイライト
          const row = btn.closest('.money-row');
          const inputGroup = btn.closest('.input-group');
          document.querySelectorAll('.money-row').forEach(r => r.classList.remove('active'));
          document.querySelectorAll('.input-group').forEach(g => g.classList.remove('focus'));
          row.classList.add('active');
          inputGroup.classList.add('focus');
        });
      });
      
      // タッチデバイス用の改善 - 金額部分のクリックを無効化し、入力フィールド部分のみ反応するように変更
      // 以前の行全体をタップする処理を削除
      
      // クリアボタンのイベント
      document.getElementById('clear-smallsafe').addEventListener('click', () => {
        clearInputs('a');
      });
      
      document.getElementById('clear-counter').addEventListener('click', () => {
        clearInputs('b');
      });
      
      document.getElementById('clear-all').addEventListener('click', () => {
        clearInputs('a');
        clearInputs('b');
      });
      
      // 初期計算実行
      calculateTotal();
    };
  </script>
</body>
</html>
